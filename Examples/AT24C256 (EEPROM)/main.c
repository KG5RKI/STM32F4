#include "stm32f4xx.h"                  // Device header

#include "my_gpio.h"
#include "my_i2c.h"
#include "my_led.h"

int main() {
	
	/* Initialize the peripherals */
	LED_Init();
	I2C1_Init();
	
	/* APPLICATION CODE STARTS HERE */

	LED_Toggle(14, 2);
	uint8_t eeprom_write_data[64] = {
		0x00, 0x00, 0xEE, 0xEE, 0xEE, 0xEE, 0xEE, 0xEE,
		0xEE, 0xEE, 0xEE, 0xEE, 0xEE, 0xEE, 0xEE, 0xEE,
		0xEE, 0xEE, 0xEE, 0xEE, 0xEE, 0xEE, 0xEE, 0xEE,
		0xEE, 0xEE, 0xEE, 0xEE, 0xEE, 0xEE, 0xEE, 0xEE,
		0xEE, 0xEE, 0xEE, 0xEE, 0xEE, 0xEE, 0xEE, 0xEE,
		0xEE, 0xEE, 0xEE, 0xEE, 0xEE, 0xEE, 0xEE, 0xEE,
		0xEE, 0xEE, 0xEE, 0xEE, 0xEE, 0xEE, 0xEE, 0xEE,
		0xEE, 0xEE, 0xEE, 0xEE, 0xEE, 0xEE, 0xEE, 0xEE,
	};
	uint8_t eeprom_read_data[62];
	
	//EEPROM_256K_I2C1_64Byte_Page_Write(EEPROM_256K_ADDR, &eeprom_write_data[0]);
	
	/* This is same as the above page write function */
	for (uint8_t addr = 0; addr < 62; addr++) {
		EEPROM_256K_I2C1_Byte_Write(EEPROM_256K_ADDR, addr, 0xEE);
	}
	
	EEPROM_256K_I2C1_Sequential_Read(EEPROM_256K_ADDR, 0, &eeprom_read_data[0], 62);
	
	LED_Toggle(12, 2);
	LED_On(12);
	
	/* APPLICATION CODE ENDS HERE */
	
	while (1) {
	}
	
	return 0;
}
